var oe=Object.defineProperty,ie=Object.defineProperties;var re=Object.getOwnPropertyDescriptors;var O=Object.getOwnPropertySymbols;var ft=Object.prototype.hasOwnProperty,ht=Object.prototype.propertyIsEnumerable;var X=Math.pow,ct=(e,t,n)=>t in e?oe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,v=(e,t)=>{for(var n in t||(t={}))ft.call(t,n)&&ct(e,n,t[n]);if(O)for(var n of O(t))ht.call(t,n)&&ct(e,n,t[n]);return e},S=(e,t)=>ie(e,re(t));var Y=(e,t)=>{var n={};for(var s in e)ft.call(e,s)&&t.indexOf(s)<0&&(n[s]=e[s]);if(e!=null&&O)for(var s of O(e))t.indexOf(s)<0&&ht.call(e,s)&&(n[s]=e[s]);return n};import{r as a,j as V}from"./vendor-react-CUK6-wvB.js";import{i as dt,g as ae,s as jt,a as Ft,b as mt,c as Ot,d as ue,e as le,f as ce,h as fe,j as he,k as de,l as Wt,m as me,n as pe,o as ge,p as ve,S as ye,H as Pe,F as T,q as xe,t as Ht,u as B,v as pt,w as M,x as Gt,y as we,z as gt,A as Ce,B as U,C as et,D as vt,E as Ee,G as Se,I as A,J as Me,K as De,L as Le,M as yt,N as be,O as Ve,P as Pt,Q as Ae,R as Te,T as G,U as Ie,V as Re,W as Bt,X as ke,Y as je}from"./vendor-3I7XTP9G.js";const ot=a.createContext({});function it(e){const t=a.useRef(null);return t.current===null&&(t.current=e()),t.current}const Ut=typeof window!="undefined",Nt=Ut?a.useLayoutEffect:a.useEffect,$=a.createContext(null),rt=a.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"});function xt(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function Fe(...e){return t=>{let n=!1;const s=e.map(o=>{const i=xt(o,t);return!n&&typeof i=="function"&&(n=!0),i});if(n)return()=>{for(let o=0;o<s.length;o++){const i=s[o];typeof i=="function"?i():xt(e[o],null)}}}}function Oe(...e){return a.useCallback(Fe(...e),e)}class We extends a.Component{getSnapshotBeforeUpdate(t){const n=this.props.childRef.current;if(n&&t.isPresent&&!this.props.isPresent&&this.props.pop!==!1){const s=n.offsetParent,o=dt(s)&&s.offsetWidth||0,i=dt(s)&&s.offsetHeight||0,r=this.props.sizeRef.current;r.height=n.offsetHeight||0,r.width=n.offsetWidth||0,r.top=n.offsetTop,r.left=n.offsetLeft,r.right=o-r.width-r.left,r.bottom=i-r.height-r.top}return null}componentDidUpdate(){}render(){return this.props.children}}function He({children:e,isPresent:t,anchorX:n,anchorY:s,root:o,pop:i}){var l,h;const r=a.useId(),u=a.useRef(null),m=a.useRef({width:0,height:0,top:0,left:0,right:0,bottom:0}),{nonce:d}=a.useContext(rt),p=(h=(l=e.props)==null?void 0:l.ref)!=null?h:e==null?void 0:e.ref,c=Oe(u,p);return a.useInsertionEffect(()=>{const{width:f,height:y,top:g,left:P,right:x,bottom:C}=m.current;if(t||i===!1||!u.current||!f||!y)return;const w=n==="left"?`left: ${P}`:`right: ${x}`,D=s==="bottom"?`bottom: ${C}`:`top: ${g}`;u.current.dataset.motionPopId=r;const L=document.createElement("style");d&&(L.nonce=d);const I=o!=null?o:document.head;return I.appendChild(L),L.sheet&&L.sheet.insertRule(`
          [data-motion-pop-id="${r}"] {
            position: absolute !important;
            width: ${f}px !important;
            height: ${y}px !important;
            ${w}px !important;
            ${D}px !important;
          }
        `),()=>{I.contains(L)&&I.removeChild(L)}},[t]),V.jsx(We,{isPresent:t,childRef:u,sizeRef:m,pop:i,children:i===!1?e:a.cloneElement(e,{ref:c})})}const Ge=({children:e,initial:t,isPresent:n,onExitComplete:s,custom:o,presenceAffectsLayout:i,mode:r,anchorX:u,anchorY:m,root:d})=>{const p=it(Be),c=a.useId();let l=!0,h=a.useMemo(()=>(l=!1,{id:c,initial:t,isPresent:n,custom:o,onExitComplete:f=>{p.set(f,!0);for(const y of p.values())if(!y)return;s&&s()},register:f=>(p.set(f,!1),()=>p.delete(f))}),[n,p,s]);return i&&l&&(h=v({},h)),a.useMemo(()=>{p.forEach((f,y)=>p.set(y,!1))},[n]),a.useEffect(()=>{!n&&!p.size&&s&&s()},[n]),e=V.jsx(He,{pop:r==="popLayout",isPresent:n,anchorX:u,anchorY:m,root:d,children:e}),V.jsx($.Provider,{value:h,children:e})};function Be(){return new Map}function $t(e=!0){const t=a.useContext($);if(t===null)return[!0,null];const{isPresent:n,onExitComplete:s,register:o}=t,i=a.useId();a.useEffect(()=>{if(e)return o(i)},[e]);const r=a.useCallback(()=>e&&s&&s(i),[i,s,e]);return!n&&s?[!1,r]:[!0]}const W=e=>e.key||"";function wt(e){const t=[];return a.Children.forEach(e,n=>{a.isValidElement(n)&&t.push(n)}),t}const Zn=({children:e,custom:t,initial:n=!0,onExitComplete:s,presenceAffectsLayout:o=!0,mode:i="sync",propagate:r=!1,anchorX:u="left",anchorY:m="top",root:d})=>{const[p,c]=$t(r),l=a.useMemo(()=>wt(e),[e]),h=r&&!p?[]:l.map(W),f=a.useRef(!0),y=a.useRef(l),g=it(()=>new Map),P=a.useRef(new Set),[x,C]=a.useState(l),[w,D]=a.useState(l);Nt(()=>{f.current=!1,y.current=l;for(let b=0;b<w.length;b++){const E=W(w[b]);h.includes(E)?(g.delete(E),P.current.delete(E)):g.get(E)!==!0&&g.set(E,!1)}},[w,h.length,h.join("-")]);const L=[];if(l!==x){let b=[...l];for(let E=0;E<w.length;E++){const R=w[E],_=W(R);h.includes(_)||(b.splice(E,0,R),L.push(R))}return i==="wait"&&L.length&&(b=L),D(wt(b)),C(l),null}const{forceRender:I}=a.useContext(ot);return V.jsx(V.Fragment,{children:w.map(b=>{const E=W(b),R=r&&!p?!1:l===w||h.includes(E),_=()=>{if(P.current.has(E))return;if(P.current.add(E),g.has(E))g.set(E,!0);else return;let lt=!0;g.forEach(se=>{se||(lt=!1)}),lt&&(I==null||I(),D(y.current),r&&(c==null||c()),s&&s())};return V.jsx(Ge,{isPresent:R,initial:!f.current||n?void 0:!1,custom:t,presenceAffectsLayout:o,mode:i,root:d,onExitComplete:R?void 0:_,anchorX:u,anchorY:m,children:b},E)})})},zt=a.createContext({strict:!1}),Ct={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]};let Et=!1;function Ue(){if(Et)return;const e={};for(const t in Ct)e[t]={isEnabled:n=>Ct[t].some(s=>!!n[s])};jt(e),Et=!0}function _t(){return Ue(),ae()}function Ne(e){const t=_t();for(const n in e)t[n]=v(v({},t[n]),e[n]);jt(t)}const $e=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","propagate","ignoreStrict","viewport"]);function N(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||$e.has(e)}let Xt=e=>!N(e);function ze(e){typeof e=="function"&&(Xt=t=>t.startsWith("on")?!N(t):e(t))}try{ze(require("@emotion/is-prop-valid").default)}catch(e){}function _e(e,t,n){const s={};for(const o in e)o==="values"&&typeof e.values=="object"||(Xt(o)||n===!0&&N(o)||!t&&!N(o)||e.draggable&&o.startsWith("onDrag"))&&(s[o]=e[o]);return s}const z=a.createContext({});function Xe(e,t){if(Ft(e)){const{initial:n,animate:s}=e;return{initial:n===!1||mt(n)?n:void 0,animate:mt(s)?s:void 0}}return e.inherit!==!1?t:{}}function Ye(e){const{initial:t,animate:n}=Xe(e,a.useContext(z));return a.useMemo(()=>({initial:t,animate:n}),[St(t),St(n)])}function St(e){return Array.isArray(e)?e.join(" "):e}const at=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function Yt(e,t,n){for(const s in t)!Ot(t[s])&&!ue(s,n)&&(e[s]=t[s])}function qe({transformTemplate:e},t){return a.useMemo(()=>{const n=at();return le(n,t,e),Object.assign({},n.vars,n.style)},[t])}function Ke(e,t){const n=e.style||{},s={};return Yt(s,n,e),Object.assign(s,qe(e,t)),s}function Je(e,t){const n={},s=Ke(e,t);return e.drag&&e.dragListener!==!1&&(n.draggable=!1,s.userSelect=s.WebkitUserSelect=s.WebkitTouchCallout="none",s.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(n.tabIndex=0),n.style=s,n}const qt=()=>S(v({},at()),{attrs:{}});function Qe(e,t,n,s){const o=a.useMemo(()=>{const i=qt();return ce(i,t,fe(s),e.transformTemplate,e.style),S(v({},i.attrs),{style:v({},i.style)})},[t]);if(e.style){const i={};Yt(i,e.style,e),o.style=v(v({},i),o.style)}return o}const Ze=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function ut(e){return typeof e!="string"||e.includes("-")?!1:!!(Ze.indexOf(e)>-1||/[A-Z]/u.test(e))}function tn(e,t,n,{latestValues:s},o,i=!1,r){const m=((r!=null?r:ut(e))?Qe:Je)(t,s,o,e),d=_e(t,typeof e=="string",i),p=e!==a.Fragment?S(v(v({},d),m),{ref:n}):{},{children:c}=t,l=a.useMemo(()=>Ot(c)?c.get():c,[c]);return a.createElement(e,S(v({},p),{children:l}))}function en({scrapeMotionValuesFromProps:e,createRenderState:t},n,s,o){return{latestValues:nn(n,s,o,e),renderState:t()}}function nn(e,t,n,s){const o={},i=s(e,{});for(const h in i)o[h]=he(i[h]);let{initial:r,animate:u}=e;const m=Ft(e),d=de(e);t&&d&&!m&&e.inherit!==!1&&(r===void 0&&(r=t.initial),u===void 0&&(u=t.animate));let p=n?n.initial===!1:!1;p=p||r===!1;const c=p?u:r;if(c&&typeof c!="boolean"&&!Wt(c)){const h=Array.isArray(c)?c:[c];for(let f=0;f<h.length;f++){const y=me(e,h[f]);if(y){const l=y,{transitionEnd:g,transition:P}=l,x=Y(l,["transitionEnd","transition"]);for(const C in x){let w=x[C];if(Array.isArray(w)){const D=p?w.length-1:0;w=w[D]}w!==null&&(o[C]=w)}for(const C in g)o[C]=g[C]}}}return o}const Kt=e=>(t,n)=>{const s=a.useContext(z),o=a.useContext($),i=()=>en(e,t,s,o);return n?i():it(i)},sn=Kt({scrapeMotionValuesFromProps:pe,createRenderState:at}),on=Kt({scrapeMotionValuesFromProps:ge,createRenderState:qt}),rn=Symbol.for("motionComponentSymbol");function an(e,t,n){const s=a.useRef(n);a.useInsertionEffect(()=>{s.current=n});const o=a.useRef(null);return a.useCallback(i=>{var u;i&&((u=e.onMount)==null||u.call(e,i)),t&&(i?t.mount(i):t.unmount());const r=s.current;if(typeof r=="function")if(i){const m=r(i);typeof m=="function"&&(o.current=m)}else o.current?(o.current(),o.current=null):r(i);else r&&(r.current=i)},[t])}const Jt=a.createContext({});function k(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function un(e,t,n,s,o,i){var C,w;const{visualElement:r}=a.useContext(z),u=a.useContext(zt),m=a.useContext($),d=a.useContext(rt),p=d.reducedMotion,c=d.skipAnimations,l=a.useRef(null),h=a.useRef(!1);s=s||u.renderer,!l.current&&s&&(l.current=s(e,{visualState:t,parent:r,props:n,presenceContext:m,blockInitialAnimation:m?m.initial===!1:!1,reducedMotionConfig:p,skipAnimations:c,isSVG:i}),h.current&&l.current&&(l.current.manuallyAnimateOnMount=!0));const f=l.current,y=a.useContext(Jt);f&&!f.projection&&o&&(f.type==="html"||f.type==="svg")&&ln(l.current,n,o,y);const g=a.useRef(!1);a.useInsertionEffect(()=>{f&&g.current&&f.update(n,m)});const P=n[ve],x=a.useRef(!!P&&!((C=window.MotionHandoffIsComplete)!=null&&C.call(window,P))&&((w=window.MotionHasOptimisedAnimation)==null?void 0:w.call(window,P)));return Nt(()=>{h.current=!0,f&&(g.current=!0,window.MotionIsMounted=!0,f.updateFeatures(),f.scheduleRenderMicrotask(),x.current&&f.animationState&&f.animationState.animateChanges())}),a.useEffect(()=>{f&&(!x.current&&f.animationState&&f.animationState.animateChanges(),x.current&&(queueMicrotask(()=>{var D;(D=window.MotionHandoffMarkAsComplete)==null||D.call(window,P)}),x.current=!1),f.enteringChildren=void 0)}),f}function ln(e,t,n,s){const{layoutId:o,layout:i,drag:r,dragConstraints:u,layoutScroll:m,layoutRoot:d,layoutCrossfade:p}=t;e.projection=new n(e.latestValues,t["data-framer-portal-id"]?void 0:Qt(e.parent)),e.projection.setOptions({layoutId:o,layout:i,alwaysMeasureLayout:!!r||u&&k(u),visualElement:e,animationType:typeof i=="string"?i:"both",initialPromotionConfig:s,crossfade:p,layoutScroll:m,layoutRoot:d})}function Qt(e){if(e)return e.options.allowProjection!==!1?e.projection:Qt(e.parent)}function q(e,{forwardMotionProps:t=!1,type:n}={},s,o){var d,p;s&&Ne(s);const i=n?n==="svg":ut(e),r=i?on:sn;function u(c,l){let h;const f=S(v(v({},a.useContext(rt)),c),{layoutId:cn(c)}),{isStatic:y}=f,g=Ye(c),P=r(c,y);if(!y&&Ut){fn();const x=hn(f);h=x.MeasureLayout,g.visualElement=un(e,P,f,o,x.ProjectionNode,i)}return V.jsxs(z.Provider,{value:g,children:[h&&g.visualElement?V.jsx(h,v({visualElement:g.visualElement},f)):null,tn(e,c,an(P,g.visualElement,l),P,y,t,i)]})}u.displayName=`motion.${typeof e=="string"?e:`create(${(p=(d=e.displayName)!=null?d:e.name)!=null?p:""})`}`;const m=a.forwardRef(u);return m[rn]=e,m}function cn({layoutId:e}){const t=a.useContext(ot).id;return t&&e!==void 0?t+"-"+e:e}function fn(e,t){a.useContext(zt).strict}function hn(e){const t=_t(),{drag:n,layout:s}=t;if(!n&&!s)return{};const o=v(v({},n),s);return{MeasureLayout:n!=null&&n.isEnabled(e)||s!=null&&s.isEnabled(e)?o.MeasureLayout:void 0,ProjectionNode:o.ProjectionNode}}function dn(e,t){if(typeof Proxy=="undefined")return q;const n=new Map,s=(i,r)=>q(i,r,e,t),o=(i,r)=>s(i,r);return new Proxy(o,{get:(i,r)=>r==="create"?s:(n.has(r)||n.set(r,q(r,void 0,e,t)),n.get(r))})}const mn=(e,t)=>{var s;return((s=t.isSVG)!=null?s:ut(e))?new ye(t):new Pe(t,{allowProjection:e!==a.Fragment})};class pn extends T{constructor(t){super(t),t.animationState||(t.animationState=xe(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();Wt(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:n}=this.node.prevProps||{};t!==n&&this.updateAnimationControlsSubscription()}unmount(){var t;this.node.animationState.reset(),(t=this.unmountControls)==null||t.call(this)}}let gn=0;class vn extends T{constructor(){super(...arguments),this.id=gn++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:n}=this.node.presenceContext,{isPresent:s}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===s)return;const o=this.node.animationState.setActive("exit",!t);n&&!t&&o.then(()=>{n(this.id)})}mount(){const{register:t,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),t&&(this.unmount=t(this.id))}unmount(){}}const yn={animation:{Feature:pn},exit:{Feature:vn}};function F(e){return{point:{x:e.pageX,y:e.pageY}}}const Pn=e=>t=>Ht(t)&&e(t,F(t));function j(e,t,n,s){return B(e,t,Pn(n),s)}const Zt=({current:e})=>e?e.ownerDocument.defaultView:null,Mt=(e,t)=>Math.abs(e-t);function xn(e,t){const n=Mt(e.x,t.x),s=Mt(e.y,t.y);return Math.sqrt(X(n,2)+X(s,2))}const Dt=new Set(["auto","scroll"]);class te{constructor(t,n,{transformPagePoint:s,contextWindow:o=window,dragSnapToOrigin:i=!1,distanceThreshold:r=3,element:u}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.scrollPositions=new Map,this.removeScrollListeners=null,this.onElementScroll=h=>{this.handleScroll(h.target)},this.onWindowScroll=()=>{this.handleScroll(window)},this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const h=J(this.lastMoveEventInfo,this.history),f=this.startEvent!==null,y=xn(h.offset,{x:0,y:0})>=this.distanceThreshold;if(!f&&!y)return;const{point:g}=h,{timestamp:P}=pt;this.history.push(S(v({},g),{timestamp:P}));const{onStart:x,onMove:C}=this.handlers;f||(x&&x(this.lastMoveEvent,h),this.startEvent=this.lastMoveEvent),C&&C(this.lastMoveEvent,h)},this.handlePointerMove=(h,f)=>{this.lastMoveEvent=h,this.lastMoveEventInfo=K(f,this.transformPagePoint),M.update(this.updatePoint,!0)},this.handlePointerUp=(h,f)=>{this.end();const{onEnd:y,onSessionEnd:g,resumeAnimation:P}=this.handlers;if((this.dragSnapToOrigin||!this.startEvent)&&P&&P(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const x=J(h.type==="pointercancel"?this.lastMoveEventInfo:K(f,this.transformPagePoint),this.history);this.startEvent&&y&&y(h,x),g&&g(h,x)},!Ht(t))return;this.dragSnapToOrigin=i,this.handlers=n,this.transformPagePoint=s,this.distanceThreshold=r,this.contextWindow=o||window;const m=F(t),d=K(m,this.transformPagePoint),{point:p}=d,{timestamp:c}=pt;this.history=[S(v({},p),{timestamp:c})];const{onSessionStart:l}=n;l&&l(t,J(d,this.history)),this.removeListeners=Gt(j(this.contextWindow,"pointermove",this.handlePointerMove),j(this.contextWindow,"pointerup",this.handlePointerUp),j(this.contextWindow,"pointercancel",this.handlePointerUp)),u&&this.startScrollTracking(u)}startScrollTracking(t){let n=t.parentElement;for(;n;){const s=getComputedStyle(n);(Dt.has(s.overflowX)||Dt.has(s.overflowY))&&this.scrollPositions.set(n,{x:n.scrollLeft,y:n.scrollTop}),n=n.parentElement}this.scrollPositions.set(window,{x:window.scrollX,y:window.scrollY}),window.addEventListener("scroll",this.onElementScroll,{capture:!0,passive:!0}),window.addEventListener("scroll",this.onWindowScroll,{passive:!0}),this.removeScrollListeners=()=>{window.removeEventListener("scroll",this.onElementScroll,{capture:!0}),window.removeEventListener("scroll",this.onWindowScroll)}}handleScroll(t){const n=this.scrollPositions.get(t);if(!n)return;const s=t===window,o=s?{x:window.scrollX,y:window.scrollY}:{x:t.scrollLeft,y:t.scrollTop},i={x:o.x-n.x,y:o.y-n.y};i.x===0&&i.y===0||(s?this.lastMoveEventInfo&&(this.lastMoveEventInfo.point.x+=i.x,this.lastMoveEventInfo.point.y+=i.y):this.history.length>0&&(this.history[0].x-=i.x,this.history[0].y-=i.y),this.scrollPositions.set(t,o),M.update(this.updatePoint,!0))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),this.removeScrollListeners&&this.removeScrollListeners(),this.scrollPositions.clear(),we(this.updatePoint)}}function K(e,t){return t?{point:t(e.point)}:e}function Lt(e,t){return{x:e.x-t.x,y:e.y-t.y}}function J({point:e},t){return{point:e,delta:Lt(e,ee(t)),offset:Lt(e,wn(t)),velocity:Cn(t,.1)}}function wn(e){return e[0]}function ee(e){return e[e.length-1]}function Cn(e,t){if(e.length<2)return{x:0,y:0};let n=e.length-1,s=null;const o=ee(e);for(;n>=0&&(s=e[n],!(o.timestamp-s.timestamp>gt(t)));)n--;if(!s)return{x:0,y:0};s===e[0]&&e.length>2&&o.timestamp-s.timestamp>gt(t)*2&&(s=e[1]);const i=Ce(o.timestamp-s.timestamp);if(i===0)return{x:0,y:0};const r={x:(o.x-s.x)/i,y:(o.y-s.y)/i};return r.x===1/0&&(r.x=0),r.y===1/0&&(r.y=0),r}function En(e,{min:t,max:n},s){return t!==void 0&&e<t?e=s?U(t,e,s.min):Math.max(e,t):n!==void 0&&e>n&&(e=s?U(n,e,s.max):Math.min(e,n)),e}function bt(e,t,n){return{min:t!==void 0?e.min+t:void 0,max:n!==void 0?e.max+n-(e.max-e.min):void 0}}function Sn(e,{top:t,left:n,bottom:s,right:o}){return{x:bt(e.x,n,o),y:bt(e.y,t,s)}}function Vt(e,t){let n=t.min-e.min,s=t.max-e.max;return t.max-t.min<e.max-e.min&&([n,s]=[s,n]),{min:n,max:s}}function Mn(e,t){return{x:Vt(e.x,t.x),y:Vt(e.y,t.y)}}function Dn(e,t){let n=.5;const s=et(e),o=et(t);return o>s?n=vt(t.min,t.max-s,e.min):s>o&&(n=vt(e.min,e.max-o,t.min)),Ee(0,1,n)}function Ln(e,t){const n={};return t.min!==void 0&&(n.min=t.min-e.min),t.max!==void 0&&(n.max=t.max-e.min),n}const nt=.35;function bn(e=nt){return e===!1?e=0:e===!0&&(e=nt),{x:At(e,"left","right"),y:At(e,"top","bottom")}}function At(e,t,n){return{min:Tt(e,t),max:Tt(e,n)}}function Tt(e,t){return typeof e=="number"?e:e[t]||0}const Vn=new WeakMap;class An{constructor(t){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Se(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=t}start(t,{snapToCursor:n=!1,distanceThreshold:s}={}){const{presenceContext:o}=this.visualElement;if(o&&o.isPresent===!1)return;const i=c=>{n&&this.snapToCursor(F(c).point),this.stopAnimation()},r=(c,l)=>{const{drag:h,dragPropagation:f,onDragStart:y}=this.getProps();if(h&&!f&&(this.openDragLock&&this.openDragLock(),this.openDragLock=Ve(h),!this.openDragLock))return;this.latestPointerEvent=c,this.latestPanInfo=l,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),A(P=>{let x=this.getAxisMotionValue(P).get()||0;if(Ae.test(x)){const{projection:C}=this.visualElement;if(C&&C.layout){const w=C.layout.layoutBox[P];w&&(x=et(w)*(parseFloat(x)/100))}}this.originPoint[P]=x}),y&&M.update(()=>y(c,l),!1,!0),yt(this.visualElement,"transform");const{animationState:g}=this.visualElement;g&&g.setActive("whileDrag",!0)},u=(c,l)=>{this.latestPointerEvent=c,this.latestPanInfo=l;const{dragPropagation:h,dragDirectionLock:f,onDirectionLock:y,onDrag:g}=this.getProps();if(!h&&!this.openDragLock)return;const{offset:P}=l;if(f&&this.currentDirection===null){this.currentDirection=In(P),this.currentDirection!==null&&y&&y(this.currentDirection);return}this.updateAxis("x",l.point,P),this.updateAxis("y",l.point,P),this.visualElement.render(),g&&M.update(()=>g(c,l),!1,!0)},m=(c,l)=>{this.latestPointerEvent=c,this.latestPanInfo=l,this.stop(c,l),this.latestPointerEvent=null,this.latestPanInfo=null},d=()=>{const{dragSnapToOrigin:c}=this.getProps();(c||this.constraints)&&this.startAnimation({x:0,y:0})},{dragSnapToOrigin:p}=this.getProps();this.panSession=new te(t,{onSessionStart:i,onStart:r,onMove:u,onSessionEnd:m,resumeAnimation:d},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:p,distanceThreshold:s,contextWindow:Zt(this.visualElement),element:this.visualElement.current})}stop(t,n){const s=t||this.latestPointerEvent,o=n||this.latestPanInfo,i=this.isDragging;if(this.cancel(),!i||!o||!s)return;const{velocity:r}=o;this.startAnimation(r);const{onDragEnd:u}=this.getProps();u&&M.postRender(()=>u(s,o))}cancel(){this.isDragging=!1;const{projection:t,animationState:n}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.endPanSession();const{dragPropagation:s}=this.getProps();!s&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}endPanSession(){this.panSession&&this.panSession.end(),this.panSession=void 0}updateAxis(t,n,s){const{drag:o}=this.getProps();if(!s||!H(t,o,this.currentDirection))return;const i=this.getAxisMotionValue(t);let r=this.originPoint[t]+s[t];this.constraints&&this.constraints[t]&&(r=En(r,this.constraints[t],this.elastic[t])),i.set(r)}resolveConstraints(){var i;const{dragConstraints:t,dragElastic:n}=this.getProps(),s=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(i=this.visualElement.projection)==null?void 0:i.layout,o=this.constraints;t&&k(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&s?this.constraints=Sn(s.layoutBox,t):this.constraints=!1,this.elastic=bn(n),o!==this.constraints&&!k(t)&&s&&this.constraints&&!this.hasMutatedConstraints&&A(r=>{this.constraints!==!1&&this.getAxisMotionValue(r)&&(this.constraints[r]=Ln(s.layoutBox[r],this.constraints[r]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:n}=this.getProps();if(!t||!k(t))return!1;const s=t.current,{projection:o}=this.visualElement;if(!o||!o.layout)return!1;const i=Me(s,o.root,this.visualElement.getTransformPagePoint());let r=Mn(o.layout.layoutBox,i);if(n){const u=n(De(r));this.hasMutatedConstraints=!!u,u&&(r=Le(u))}return r}startAnimation(t){const{drag:n,dragMomentum:s,dragElastic:o,dragTransition:i,dragSnapToOrigin:r,onDragTransitionEnd:u}=this.getProps(),m=this.constraints||{},d=A(p=>{if(!H(p,n,this.currentDirection))return;let c=m&&m[p]||{};r&&(c={min:0,max:0});const l=o?200:1e6,h=o?40:1e7,f=v(v({type:"inertia",velocity:s?t[p]:0,bounceStiffness:l,bounceDamping:h,timeConstant:750,restDelta:1,restSpeed:10},i),c);return this.startAxisValueAnimation(p,f)});return Promise.all(d).then(u)}startAxisValueAnimation(t,n){const s=this.getAxisMotionValue(t);return yt(this.visualElement,t),s.start(be(t,s,0,n,this.visualElement,!1))}stopAnimation(){A(t=>this.getAxisMotionValue(t).stop())}getAxisMotionValue(t){const n=`_drag${t.toUpperCase()}`,s=this.visualElement.getProps(),o=s[n];return o||this.visualElement.getValue(t,(s.initial?s.initial[t]:void 0)||0)}snapToCursor(t){A(n=>{const{drag:s}=this.getProps();if(!H(n,s,this.currentDirection))return;const{projection:o}=this.visualElement,i=this.getAxisMotionValue(n);if(o&&o.layout){const{min:r,max:u}=o.layout.layoutBox[n],m=i.get()||0;i.set(t[n]-U(r,u,.5)+m)}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:n}=this.getProps(),{projection:s}=this.visualElement;if(!k(n)||!s||!this.constraints)return;this.stopAnimation();const o={x:0,y:0};A(r=>{const u=this.getAxisMotionValue(r);if(u&&this.constraints!==!1){const m=u.get();o[r]=Dn({min:m,max:m},this.constraints[r])}});const{transformTemplate:i}=this.visualElement.getProps();this.visualElement.current.style.transform=i?i({},""):"none",s.root&&s.root.updateScroll(),s.updateLayout(),this.constraints=!1,this.resolveConstraints(),A(r=>{if(!H(r,t,null))return;const u=this.getAxisMotionValue(r),{min:m,max:d}=this.constraints[r];u.set(U(m,d,o[r]))}),this.visualElement.render()}addListeners(){if(!this.visualElement.current)return;Vn.set(this.visualElement,this);const t=this.visualElement.current,n=j(t,"pointerdown",d=>{const{drag:p,dragListener:c=!0}=this.getProps(),l=d.target,h=l!==t&&Te(l);p&&c&&!h&&this.start(d)});let s;const o=()=>{const{dragConstraints:d}=this.getProps();k(d)&&d.current&&(this.constraints=this.resolveRefConstraints(),s||(s=Tn(t,d.current,()=>this.scalePositionWithinConstraints())))},{projection:i}=this.visualElement,r=i.addEventListener("measure",o);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),M.read(o);const u=B(window,"resize",()=>this.scalePositionWithinConstraints()),m=i.addEventListener("didUpdate",(({delta:d,hasLayoutChanged:p})=>{this.isDragging&&p&&(A(c=>{const l=this.getAxisMotionValue(c);l&&(this.originPoint[c]+=d[c].translate,l.set(l.get()+d[c].translate))}),this.visualElement.render())}));return()=>{u(),n(),r(),m&&m(),s&&s()}}getProps(){const t=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:s=!1,dragPropagation:o=!1,dragConstraints:i=!1,dragElastic:r=nt,dragMomentum:u=!0}=t;return S(v({},t),{drag:n,dragDirectionLock:s,dragPropagation:o,dragConstraints:i,dragElastic:r,dragMomentum:u})}}function It(e){let t=!0;return()=>{if(t){t=!1;return}e()}}function Tn(e,t,n){const s=Pt(e,It(n)),o=Pt(t,It(n));return()=>{s(),o()}}function H(e,t,n){return(t===!0||t===e)&&(n===null||n===e)}function In(e,t=10){let n=null;return Math.abs(e.y)>t?n="y":Math.abs(e.x)>t&&(n="x"),n}class Rn extends T{constructor(t){super(t),this.removeGroupControls=G,this.removeListeners=G,this.controls=new An(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||G}update(){const{dragControls:t}=this.node.getProps(),{dragControls:n}=this.node.prevProps||{};t!==n&&(this.removeGroupControls(),t&&(this.removeGroupControls=t.subscribe(this.controls)))}unmount(){this.removeGroupControls(),this.removeListeners(),this.controls.isDragging||this.controls.endPanSession()}}const Q=e=>(t,n)=>{e&&M.update(()=>e(t,n),!1,!0)};class kn extends T{constructor(){super(...arguments),this.removePointerDownListener=G}onPointerDown(t){this.session=new te(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:Zt(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:n,onPan:s,onPanEnd:o}=this.node.getProps();return{onSessionStart:Q(t),onStart:Q(n),onMove:Q(s),onEnd:(i,r)=>{delete this.session,o&&M.postRender(()=>o(i,r))}}}mount(){this.removePointerDownListener=j(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}let Z=!1;class jn extends a.Component{componentDidMount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:s,layoutId:o}=this.props,{projection:i}=t;i&&(n.group&&n.group.add(i),s&&s.register&&o&&s.register(i),Z&&i.root.didUpdate(),i.addEventListener("animationComplete",()=>{this.safeToRemove()}),i.setOptions(S(v({},i.options),{layoutDependency:this.props.layoutDependency,onExitComplete:()=>this.safeToRemove()}))),Re.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:n,visualElement:s,drag:o,isPresent:i}=this.props,{projection:r}=s;return r&&(r.isPresent=i,t.layoutDependency!==n&&r.setOptions(S(v({},r.options),{layoutDependency:n})),Z=!0,o||t.layoutDependency!==n||n===void 0||t.isPresent!==i?r.willUpdate():this.safeToRemove(),t.isPresent!==i&&(i?r.promote():r.relegate()||M.postRender(()=>{const u=r.getStack();(!u||!u.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),Ie.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:s}=this.props,{projection:o}=t;Z=!0,o&&(o.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(o),s&&s.deregister&&s.deregister(o))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function ne(e){const[t,n]=$t(),s=a.useContext(ot);return V.jsx(jn,S(v({},e),{layoutGroup:s,switchLayoutGroup:a.useContext(Jt),isPresent:t,safeToRemove:n}))}const Fn={pan:{Feature:kn},drag:{Feature:Rn,ProjectionNode:Bt,MeasureLayout:ne}};function Rt(e,t,n){const{props:s}=e;e.animationState&&s.whileHover&&e.animationState.setActive("whileHover",n==="Start");const o="onHover"+n,i=s[o];i&&M.postRender(()=>i(t,F(t)))}class On extends T{mount(){const{current:t}=this.node;t&&(this.unmount=ke(t,(n,s)=>(Rt(this.node,s,"Start"),o=>Rt(this.node,o,"End"))))}unmount(){}}class Wn extends T{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch(n){t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Gt(B(this.node.current,"focus",()=>this.onFocus()),B(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function kt(e,t,n){const{props:s}=e;if(e.current instanceof HTMLButtonElement&&e.current.disabled)return;e.animationState&&s.whileTap&&e.animationState.setActive("whileTap",n==="Start");const o="onTap"+(n==="End"?"":n),i=s[o];i&&M.postRender(()=>i(t,F(t)))}class Hn extends T{mount(){const{current:t}=this.node;if(!t)return;const{globalTapTarget:n,propagate:s}=this.node.props;this.unmount=je(t,(o,i)=>(kt(this.node,i,"Start"),(r,{success:u})=>kt(this.node,r,u?"End":"Cancel")),{useGlobalTarget:n,stopPropagation:(s==null?void 0:s.tap)===!1})}unmount(){}}const st=new WeakMap,tt=new WeakMap,Gn=e=>{const t=st.get(e.target);t&&t(e)},Bn=e=>{e.forEach(Gn)};function Un(n){var s=n,{root:e}=s,t=Y(s,["root"]);const o=e||document;tt.has(o)||tt.set(o,{});const i=tt.get(o),r=JSON.stringify(t);return i[r]||(i[r]=new IntersectionObserver(Bn,v({root:e},t))),i[r]}function Nn(e,t,n){const s=Un(t);return st.set(e,n),s.observe(e),()=>{st.delete(e),s.unobserve(e)}}const $n={some:0,all:1};class zn extends T{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:n,margin:s,amount:o="some",once:i}=t,r={root:n?n.current:void 0,rootMargin:s,threshold:typeof o=="number"?o:$n[o]},u=m=>{const{isIntersecting:d}=m;if(this.isInView===d||(this.isInView=d,i&&!d&&this.hasEnteredView))return;d&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",d);const{onViewportEnter:p,onViewportLeave:c}=this.node.getProps(),l=d?p:c;l&&l(m)};return Nn(this.node.current,r,u)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver=="undefined")return;const{props:t,prevProps:n}=this.node;["amount","margin","root"].some(_n(t,n))&&this.startObserver()}unmount(){}}function _n({viewport:e={}},{viewport:t={}}={}){return n=>e[n]!==t[n]}const Xn={inView:{Feature:zn},tap:{Feature:Hn},focus:{Feature:Wn},hover:{Feature:On}},Yn={layout:{ProjectionNode:Bt,MeasureLayout:ne}},qn=v(v(v(v({},yn),Xn),Fn),Yn),ts=dn(qn,mn);export{Zn as A,ts as m};
